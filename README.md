# hosepen - ComfyUIå®æ—¶ç»˜ç”»æ’ä»¶

ğŸ åœ¨ ComfyUI ä¸­éšæ—¶æ‰“å¼€ç”»æ¿è¿›è¡Œå®æ—¶ç»˜ç”»ï¼

## ç®€ä»‹

hosepen æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ ComfyUI æ’ä»¶ï¼Œæä¾›å®æ—¶ç»˜ç”»åŠŸèƒ½å’Œå›¾åƒå¯¼å…¥å¯¼å‡ºèŠ‚ç‚¹ã€‚æ— éœ€é¢å¤–ä¾èµ–ï¼Œå¼€ç®±å³ç”¨ã€‚

## æ ¸å¿ƒåŠŸèƒ½

- ğŸ **æ‚¬æµ®æŒ‰é’®** - å³ä¸‹è§’å¯æ‹–æ‹½çš„é©¬å›¾æ ‡ï¼Œéšæ—¶æ‰“å¼€ç”»æ¿
- ğŸ¨ **å®æ—¶ç»˜ç”»** - ç™½è‰²èƒŒæ™¯çš„ç”»æ¿ï¼Œæ”¯æŒè‡ªç”±ç»˜ç”»
- ğŸŒˆ **é¢œè‰²é€‰æ‹©** - è‡ªç”±é€‰æ‹©ç”»ç¬”é¢œè‰²
- ğŸ“ **ç²—ç»†è°ƒèŠ‚** - è°ƒèŠ‚ç”»ç¬”ç²—ç»†ï¼ˆ1-20pxï¼‰
- ğŸ’¾ **ä¿å­˜åŠŸèƒ½** - å°†ç»˜ç”»ä¿å­˜ä¸ºPNGå›¾ç‰‡åˆ°ComfyUIè¾“å…¥ç›®å½•
- ğŸ—‘ï¸ **æ¸…ç©ºç”»å¸ƒ** - ä¸€é”®æ¸…ç©ºé‡æ–°ç»˜ç”»
- ğŸ“‹ **å‰ªè´´æ¿æ”¯æŒ** - Ctrl+V ç²˜è´´å›¾åƒï¼ŒCtrl+C å¤åˆ¶å›¾åƒ
- ğŸ“¥ **å›¾åƒå¯¼å…¥** - ä»å…¶ä»–èŠ‚ç‚¹å¯¼å…¥å›¾åƒåˆ°ç”»æ¿
- ğŸ“¤ **å›¾åƒå¯¼å‡º** - ä»ç”»æ¿å¯¼å‡ºå›¾åƒåˆ°å·¥ä½œæµ

## å®‰è£…

å°†æ’ä»¶æ”¾åˆ° ComfyUI çš„ `custom_nodes` ç›®å½•ä¸‹ï¼Œé‡å¯å³å¯ã€‚

```bash
cd ComfyUI/custom_nodes
git clone https://github.com/yourusername/comfy_hosepen.git
```

æˆ–æ‰‹åŠ¨ä¸‹è½½åè§£å‹åˆ° `custom_nodes/comfy_hosepen` ç›®å½•ã€‚

## ä½¿ç”¨

### æµ®åŠ¨ç”»æ¿

1. **æ‰“å¼€ç”»æ¿**ï¼šç‚¹å‡»å³ä¸‹è§’ ğŸ æŒ‰é’®
2. **é€‰æ‹©é¢œè‰²**ï¼šç‚¹å‡»é¢œè‰²é€‰æ‹©å™¨é€‰æ‹©ç”»ç¬”é¢œè‰²
3. **è°ƒèŠ‚ç²—ç»†**ï¼šæ‹–åŠ¨æ»‘å—è°ƒèŠ‚ç”»ç¬”ç²—ç»†
4. **å¼€å§‹ç»˜ç”»**ï¼šåœ¨ç™½è‰²ç”»å¸ƒä¸Šè‡ªç”±ç»˜ç”»
5. **ä¿å­˜ä½œå“**ï¼šç‚¹å‡»"ğŸ’¾ ä¿å­˜"æŒ‰é’®ï¼Œå›¾ç‰‡ä¼šä¿å­˜åˆ° `ComfyUI/input/hosepen/` ç›®å½•
6. **æ¸…ç©ºç”»å¸ƒ**ï¼šç‚¹å‡»"ğŸ—‘ï¸ æ¸…ç©º"æŒ‰é’®æ¸…ç©ºç”»å¸ƒ

### å¿«æ·é”®

#### å·¥å…·åˆ‡æ¢
- **B** - ç”»ç¬”æ¨¡å¼ ğŸ–Œï¸
- **E** - æ©¡çš®æ“¦æ¨¡å¼ ğŸ§¹
- **V** - ç§»åŠ¨æ¨¡å¼ ğŸ”„
- **T** - ç¼©æ”¾æ¨¡å¼ ğŸ“
- **R** - æ—‹è½¬æ¨¡å¼ ğŸ”„

#### æ“ä½œå¿«æ·é”®
- **Space** - æŒ‰ä½ç©ºæ ¼é”®è¿›å…¥å¹³ç§»æ¨¡å¼ï¼ˆæ‹–åŠ¨ç”»å¸ƒï¼‰
- **Ctrl + V** - ä»å‰ªè´´æ¿ç²˜è´´å›¾åƒ ğŸ“‹
- **Ctrl + C** - å¤åˆ¶å›¾åƒåˆ°å‰ªè´´æ¿ ğŸ“„
- **Ctrl + Z** - æ’¤é”€
- **Ctrl + Y** æˆ– **Ctrl + Shift + Z** - é‡åš
- **Ctrl + 0** - é‡ç½®è§†å›¾
- **ESC** - å…³é—­ç”»æ¿çª—å£

### å›¾å±‚æ“ä½œ

#### å¤šå›¾å±‚é€‰æ‹©
- **å•å‡»å¤é€‰æ¡†** - é€‰ä¸­/å–æ¶ˆé€‰ä¸­å•ä¸ªå›¾å±‚
- **Ctrl + å•å‡»å¤é€‰æ¡†** - å¤šé€‰å›¾å±‚ï¼ˆå¯åŒæ—¶é€‰ä¸­å¤šä¸ªå›¾å±‚ï¼‰
- **é€‰ä¸­å¤šä¸ªå›¾å±‚å** - å¯ä»¥åŒæ—¶å¯¹å¤šä¸ªå›¾å±‚è¿›è¡Œå˜æ¢æ“ä½œï¼ˆç§»åŠ¨ã€ç¼©æ”¾ã€æ—‹è½¬ã€é•œåƒç­‰ï¼‰

#### å›¾å±‚ç®¡ç†
- **â• æ–°å»ºå›¾å±‚** - åˆ›å»ºæ–°çš„ç©ºç™½å›¾å±‚
- **ğŸ—‘ï¸ åˆ é™¤å›¾å±‚** - åˆ é™¤é€‰ä¸­çš„å›¾å±‚
- **ğŸ‘ï¸ æ˜¾ç¤º/éšè—** - åˆ‡æ¢å›¾å±‚å¯è§æ€§
- **é€æ˜åº¦æ»‘å—** - è°ƒèŠ‚å›¾å±‚é€æ˜åº¦ï¼ˆ0-100%ï¼‰
- **æ‹–æ‹½æ’åº** - æ‹–åŠ¨å›¾å±‚é¡¹å¯è°ƒæ•´å›¾å±‚é¡ºåº

### ComfyUIèŠ‚ç‚¹

æ’ä»¶æä¾›ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œä½äº `hosepen` åˆ†ç±»ä¸‹ï¼š

#### 1. Hosepen Drawing
å ä½èŠ‚ç‚¹ï¼Œç”¨äºæ ‡è¯† hosepen åŠŸèƒ½ã€‚

#### 2. Hosepen Image Input
å°†å·¥ä½œæµä¸­çš„å›¾åƒå¯¼å…¥åˆ°ç”»æ¿ï¼š
- **è¾“å…¥**ï¼š`images` (IMAGE) - ä»»æ„å›¾åƒèŠ‚ç‚¹çš„è¾“å‡º
- **åŠŸèƒ½**ï¼šå°†å›¾åƒå‘é€åˆ°ç”»æ¿ï¼Œå¯åœ¨ç”»æ¿ä¸Šç»§ç»­ç¼–è¾‘

#### 3. Hosepen Image Output
ä»ç”»æ¿å¯¼å‡ºå›¾åƒåˆ°å·¥ä½œæµï¼š
- **è¾“å‡º**ï¼š`image` (IMAGE) - å¯è¿æ¥åˆ°ä»»æ„å›¾åƒå¤„ç†èŠ‚ç‚¹
- **åŠŸèƒ½**ï¼šåŠ è½½ `input/hosepen/` ç›®å½•ä¸­ä¿å­˜çš„å›¾åƒ
- **é€‰æ‹©**ï¼šå¯ä»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©å·²ä¿å­˜çš„å›¾åƒæ–‡ä»¶

## å·¥ä½œæµç¤ºä¾‹

```
LoadImage â†’ HosepenImageInput â†’ (åœ¨ç”»æ¿ç¼–è¾‘) â†’ ä¿å­˜
                                                    â†“
                                          HosepenImageOutput â†’ SaveImage
```

## ç‰¹æ€§

- âœ¨ **æµç•…ç»˜ç”»** - å®æ—¶å“åº”ï¼Œæµç•…çš„ç»˜ç”»ä½“éªŒ
- ğŸ¯ **ç²¾ç¡®æ§åˆ¶** - å¯è°ƒèŠ‚ç”»ç¬”ç²—ç»†å’Œé¢œè‰²
- ğŸ“± **æ‹–æ‹½ç§»åŠ¨** - æŒ‰é’®å’Œçª—å£éƒ½å¯ä»¥æ‹–æ‹½ç§»åŠ¨
- ğŸ’« **ç¾è§‚ç•Œé¢** - ç°ä»£åŒ–çš„UIè®¾è®¡ï¼Œç™½è‰²èƒŒæ™¯æ¸…çˆ½èˆ’é€‚
- ğŸ”„ **å·¥ä½œæµé›†æˆ** - æ— ç¼é›†æˆåˆ° ComfyUI å·¥ä½œæµä¸­
- ğŸ’¾ **è‡ªåŠ¨ä¿å­˜** - å›¾åƒè‡ªåŠ¨ä¿å­˜åˆ°æŒ‡å®šç›®å½•ï¼Œä¾¿äºç®¡ç†

## æ–‡ä»¶ç»“æ„

```
comfy_hosepen/
â”œâ”€â”€ __init__.py          # æ’ä»¶å…¥å£å’Œè·¯ç”±æ³¨å†Œ
â”œâ”€â”€ nodes.py             # ComfyUIèŠ‚ç‚¹å®šä¹‰
â”œâ”€â”€ server.py            # æœåŠ¡ç«¯API
â”œâ”€â”€ web/
â”‚   â””â”€â”€ hosepen.js       # å‰ç«¯ç”»æ¿ç•Œé¢
â””â”€â”€ README.md
```

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-11-24)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒå®æ—¶ç»˜ç”»åŠŸèƒ½
- æ”¯æŒé¢œè‰²å’Œç²—ç»†è°ƒèŠ‚
- æ”¯æŒä¿å­˜å’Œæ¸…ç©ºç”»å¸ƒ
- çª—å£å’ŒæŒ‰é’®å¯æ‹–æ‹½ç§»åŠ¨
- æä¾›å›¾åƒå¯¼å…¥å¯¼å‡ºèŠ‚ç‚¹
- é›†æˆåˆ° ComfyUI å·¥ä½œæµ

## è®¸å¯è¯

MIT License

- **ä¸ªäººä½¿ç”¨**ï¼šå®Œå…¨å…è´¹
- **å•†ç”¨å¹³å°æ–¹å’Œæœºæ„**ï¼šä½¿ç”¨æœ¬æ’ä»¶éœ€é€šçŸ¥ä½œè€…

## è”ç³»æ–¹å¼

- **é‚®ç®±**ï¼š15734666@qq.com
- **Bç«™**ï¼šè“æ³¢çƒçš„çƒ

---

**Made with ğŸ by Horse Team**

---

# hosepen - ComfyUI Real-time Drawing Plugin

ğŸ Open a drawing board anytime in ComfyUI for real-time drawing!

## Introduction

hosepen is a lightweight ComfyUI plugin that provides real-time drawing functionality and image import/export nodes. No extra dependencies required, ready to use out of the box.

## Core Features

- ğŸ **Floating Button** - Draggable horse icon in the bottom-right corner, open the canvas anytime
- ğŸ¨ **Real-time Drawing** - White background canvas for free drawing
- ğŸŒˆ **Color Picker** - Choose any brush color
- ğŸ“ **Size Adjustment** - Adjust brush size (1-20px)
- ğŸ’¾ **Save Function** - Save drawings as PNG images to ComfyUI input directory
- ğŸ—‘ï¸ **Clear Canvas** - Clear canvas with one click
- ğŸ“‹ **Clipboard Support** - Ctrl+V to paste images, Ctrl+C to copy images
- ğŸ“¥ **Image Import** - Import images from other nodes to the canvas
- ğŸ“¤ **Image Export** - Export images from canvas to workflow

## Installation

Place the plugin in ComfyUI's `custom_nodes` directory and restart.

```bash
cd ComfyUI/custom_nodes
git clone https://github.com/yourusername/comfy_hosepen.git
```

Or manually download and extract to `custom_nodes/comfy_hosepen` directory.

## Usage

### Floating Canvas

1. **Open Canvas**: Click the ğŸ button in the bottom-right corner
2. **Choose Color**: Click the color picker to select brush color
3. **Adjust Size**: Drag the slider to adjust brush size
4. **Start Drawing**: Draw freely on the white canvas
5. **Save Work**: Click "ğŸ’¾ Save" button, images will be saved to `ComfyUI/input/hosepen/` directory
6. **Clear Canvas**: Click "ğŸ—‘ï¸ Clear" button to clear canvas

### Keyboard Shortcuts

#### Tool Switching
- **B** - Brush mode ğŸ–Œï¸
- **E** - Eraser mode ğŸ§¹
- **V** - Move mode ğŸ”„
- **T** - Scale mode ğŸ“
- **R** - Rotate mode ğŸ”„

#### Operation Shortcuts
- **Space** - Hold Space to enter pan mode (drag canvas)
- **Ctrl + V** - Paste image from clipboard ğŸ“‹
- **Ctrl + C** - Copy image to clipboard ğŸ“„
- **Ctrl + Z** - Undo
- **Ctrl + Y** or **Ctrl + Shift + Z** - Redo
- **Ctrl + 0** - Reset view
- **ESC** - Close canvas window

### Layer Operations

#### Multi-layer Selection
- **Click checkbox** - Select/deselect a single layer
- **Ctrl + Click checkbox** - Multi-select layers (select multiple layers simultaneously)
- **After selecting multiple layers** - Apply transformations to multiple layers at once (move, scale, rotate, flip, etc.)

#### Layer Management
- **â• New Layer** - Create a new blank layer
- **ğŸ—‘ï¸ Delete Layer** - Delete selected layer
- **ğŸ‘ï¸ Show/Hide** - Toggle layer visibility
- **Opacity Slider** - Adjust layer opacity (0-100%)
- **Drag to Reorder** - Drag layer items to adjust layer order

### ComfyUI Nodes

The plugin provides three nodes under the `hosepen` category:

#### 1. Hosepen Drawing
Placeholder node to identify hosepen functionality.

#### 2. Hosepen Image Input
Import images from workflow to canvas:
- **Input**: `images` (IMAGE) - Output from any image node
- **Function**: Send images to canvas for further editing

#### 3. Hosepen Image Output
Export images from canvas to workflow:
- **Output**: `image` (IMAGE) - Can connect to any image processing node
- **Function**: Load images saved in `input/hosepen/` directory
- **Selection**: Choose from dropdown list of saved image files

## Workflow Example

```
LoadImage â†’ HosepenImageInput â†’ (Edit in canvas) â†’ Save
                                                      â†“
                                            HosepenImageOutput â†’ SaveImage
```

## Features

- âœ¨ **Smooth Drawing** - Real-time response, smooth drawing experience
- ğŸ¯ **Precise Control** - Adjustable brush size and color
- ğŸ“± **Draggable** - Both button and window can be dragged
- ğŸ’« **Beautiful UI** - Modern UI design, clean white background
- ğŸ”„ **Workflow Integration** - Seamlessly integrated into ComfyUI workflow
- ğŸ’¾ **Auto Save** - Images automatically saved to designated directory for easy management

## File Structure

```
comfy_hosepen/
â”œâ”€â”€ __init__.py          # Plugin entry and route registration
â”œâ”€â”€ nodes.py             # ComfyUI node definitions
â”œâ”€â”€ server.py            # Server-side API
â”œâ”€â”€ web/
â”‚   â””â”€â”€ hosepen.js       # Frontend canvas interface
â””â”€â”€ README.md
```

## Changelog

### v1.0.0 (2024-11-24)
- Initial release
- Real-time drawing support
- Color and size adjustment
- Save and clear canvas
- Draggable window and button
- Image import/export nodes
- Integrated into ComfyUI workflow

## License

MIT License

- **Personal Use**: Completely free
- **Commercial Platforms**: Please notify the author before use

## Contact

- **Email**: 15734666@qq.com
- **Bilibili**: è“æ³¢çƒçš„çƒ

---

**Made with ğŸ by Horse Team**
